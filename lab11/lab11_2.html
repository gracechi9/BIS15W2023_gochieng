<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Data Visualization: ggplot part 3</title>

<script src="lab11_2_files/header-attrs-2.19/header-attrs.js"></script>
<script src="lab11_2_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="lab11_2_files/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="lab11_2_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="lab11_2_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="lab11_2_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="lab11_2_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="lab11_2_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="lab11_2_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="lab11_2_files/navigation-1.1/tabsets.js"></script>
<link href="lab11_2_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="lab11_2_files/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">



<h1 class="title toc-ignore">Data Visualization: <code>ggplot</code>
part 3</h1>

</div>


<div id="learning-goals" class="section level2">
<h2>Learning Goals</h2>
<p><em>At the end of this exercise, you will be able to:</em><br />
1. Adjust the aesthetics of plots in ggplot using <code>themes</code>,
<code>RColorBrewer</code>, and <code>paletteer.</code><br />
2. Use faceting to produce multi-panel plots.</p>
</div>
<div id="group-project" class="section level2">
<h2>Group project</h2>
<p>We will meet in our groups today to compare the data sets that we
found. You should try to pick the data set that you think will be most
appropriate; i.e.Â does it have a mix of variables, does it have a story
to tell? Once you have a data set, think about the kinds of questions
you might ask. Remember, in the end you will need to deliver a 5-6
minute presentation of your work. If you need help, please ask!</p>
</div>
<div id="resources" class="section level2">
<h2>Resources</h2>
<ul>
<li><a
href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">ggplot2
cheatsheet</a></li>
<li><a href="https://r4ds.had.co.nz/">R for Data Science</a></li>
<li><a href="http://www.cookbook-r.com/">R Cookbook</a></li>
<li><a
href="https://ggplot2.tidyverse.org/reference/ggtheme.html"><code>ggplot</code>
themes</a></li>
<li><a
href="http://www.rebeccabarter.com/blog/2017-11-17-ggplot2_tutorial/">Rebecca
Barter <code>ggplot</code> Tutorial</a></li>
<li><a
href="http://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3">R
Color Brewer</a></li>
</ul>
</div>
<div id="load-the-libraries" class="section level2">
<h2>Load the libraries</h2>
<pre class="r"><code>library(tidyverse)
library(RColorBrewer)
library(paletteer)
library(janitor)
library(here)</code></pre>
<pre class="r"><code>options(scipen=999) #cancels the use of scientific notation for the session</code></pre>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>For this tutorial, we will use:<br />
<a
href="http://datadryad.org/resource/doi:10.5061/dryad.q5j65/1">Homerange</a>.
The data are from: Tamburello N, Cote IM, Dulvy NK (2015) Energy and the
scaling of animal space use. The American Naturalist 186(2):196-211. <a
href="http://dx.doi.org/10.1086/682070"
class="uri">http://dx.doi.org/10.1086/682070</a>.</p>
<pre class="r"><code>homerange &lt;- read_csv(here(&quot;lab11&quot;, &quot;data&quot;, &quot;Tamburelloetal_HomeRangeDatabase.csv&quot;))</code></pre>
</div>
<div id="ggplot-themes" class="section level2">
<h2>ggplot themes</h2>
<p>There are many options to change the theme of your plots. Have a look
<a
href="https://www.datanovia.com/en/blog/ggplot-themes-gallery/">here</a>
for some excellent examples. I am going to build a basic plot here and
then use it throughout to illustrate the themes.</p>
<pre class="r"><code>p &lt;- homerange %&gt;% 
  ggplot(aes(x=taxon, fill=trophic.guild))+
  geom_bar(na.rm=T, position=&quot;dodge&quot;)
p</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-4-1.png" /><!-- --></p>
<pre class="r"><code>p+theme_classic()+
  theme(axis.text.x = element_text(angle = 60, hjust=1))+
  labs(title = &quot;Observations by Taxon in Homerange Data&quot;,
       x = NULL,
       y= &quot;n&quot;,
       fill= &quot;Trophic Guild&quot;)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-5-1.png" /><!-- --></p>
</div>
<div id="legends" class="section level2">
<h2>Legends</h2>
<p>There are lots of options to manipulate legends. Have a look <a
href="http://www.sthda.com/english/wiki/ggplot2-legend-easy-steps-to-change-the-position-and-the-appearance-of-a-graph-legend-in-r-software">here</a>.</p>
<pre class="r"><code>p+theme_linedraw()+
  theme(legend.position = &quot;bottom&quot;,
        axis.text.x = element_text(angle = 60, hjust=1))+
  labs(title = &quot;Observations by Taxon in Homerange Data&quot;,
       x = NULL,
       y= &quot;n&quot;,
       fill= &quot;Trophic Guild&quot;)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-6-1.png" /><!-- --></p>
</div>
<div id="not-enough-ggthemes" class="section level2">
<h2>Not enough? <a
href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/">ggthemes</a></h2>
<pre class="r"><code>#install.packages(&quot;ggthemes&quot;)
library(ggthemes)</code></pre>
<p>Here is a list of the <code>ggthemes</code></p>
<pre class="r"><code>ls(&quot;package:ggthemes&quot;)[grepl(&quot;theme_&quot;, ls(&quot;package:ggthemes&quot;))]</code></pre>
<pre><code>##  [1] &quot;theme_base&quot;            &quot;theme_calc&quot;            &quot;theme_clean&quot;          
##  [4] &quot;theme_economist&quot;       &quot;theme_economist_white&quot; &quot;theme_excel&quot;          
##  [7] &quot;theme_excel_new&quot;       &quot;theme_few&quot;             &quot;theme_fivethirtyeight&quot;
## [10] &quot;theme_foundation&quot;      &quot;theme_gdocs&quot;           &quot;theme_hc&quot;             
## [13] &quot;theme_igray&quot;           &quot;theme_map&quot;             &quot;theme_pander&quot;         
## [16] &quot;theme_par&quot;             &quot;theme_solarized&quot;       &quot;theme_solarized_2&quot;    
## [19] &quot;theme_solid&quot;           &quot;theme_stata&quot;           &quot;theme_tufte&quot;          
## [22] &quot;theme_wsj&quot;</code></pre>
<pre class="r"><code>p+ theme_igray()+
  theme(legend.position = &quot;bottom&quot;,
        axis.text.x = element_text(angle = 60, hjust=1))+
  labs(title = &quot;Observations by Taxon in Homerange Data&quot;,
       x = NULL,
       y= &quot;n&quot;,
       fill= &quot;Trophic Guild&quot;)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-9-1.png" /><!-- --></p>
</div>
<div id="rcolorbrewer" class="section level2">
<h2>RColorBrewer</h2>
<p>The default colors used by ggplot are often uninspiring. They donât
make plots pop out in presentations or publications, and you may want to
use a customized palette to make things visually consistent.</p>
<p>Access the help for <code>RColorBrewer</code>.</p>
<pre class="r"><code>?RColorBrewer</code></pre>
<p>The thing to notice is that there are three different palettes: 1)
sequential, 2) diverging, and 3) qualitative. Within each of these there
are several selections. You can bring up the colors by using
<code>display.brewer.pal()</code>. Specify the number of colors that you
want and the palette name.</p>
<pre class="r"><code>display.brewer.pal(4,&quot;GnBu&quot;)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-11-1.png" /><!-- --></p>
<p>The <a
href="http://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3">R
Color Brewer</a> website is very helpful for getting an idea of the
color palettes. To make things easy, use these two guidelines:</p>
<p>+<code>scale_colour_brewer()</code> is for points<br />
+<code>scale_fill_brewer()</code> is for fills</p>
<p>Here I chose the <code>Paired</code> palette. Take a moment and
experiment with other options.</p>
<pre class="r"><code>p+scale_fill_brewer(palette = &quot;BuPu&quot;)+
  theme(legend.position = &quot;bottom&quot;,
        axis.text.x = element_text(angle = 60, hjust=1))+
  labs(title = &quot;Observations by Taxon in Homerange Data&quot;,
       x = NULL,
       y= &quot;n&quot;,
       fill= &quot;Trophic Guild&quot;)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-12-1.png" /><!-- --></p>
</div>
<div id="manually-setting-colors" class="section level2">
<h2>Manually Setting Colors</h2>
<p>You can also use <code>paleteer</code> to build a custom palette for
consistency. To access the <code>paleteer</code> collection, I add it to
a new object.</p>
<pre class="r"><code>colors &lt;- paletteer::palettes_d_names</code></pre>
<p>Now we can display the palettes. Assign the palette to
<code>my_palette</code> and then build this base R bar plot. There are a
lot of options; <code>paleteer</code> is a collection of popular
palettes. I really like the [<code>ggsci</code> package] (<a
href="https://cran.r-project.org/web/packages/ggsci/vignettes/ggsci.html"
class="uri">https://cran.r-project.org/web/packages/ggsci/vignettes/ggsci.html</a>)</p>
<pre class="r"><code>my_palette &lt;- paletteer_d(&quot;ggprism::flames&quot;)</code></pre>
<pre class="r"><code>barplot(rep(1,14), axes=FALSE, col=my_palette)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-15-1.png" /><!-- --></p>
<p>Now we just identify <code>my_palette</code> as part of
<code>scale_fill_manual()</code></p>
<pre class="r"><code>p+scale_fill_manual(values=my_palette)+
  theme(legend.position = &quot;bottom&quot;,
        axis.text.x = element_text(angle = 60, hjust=1))+
  labs(title = &quot;Observations by Taxon in Homerange Data&quot;,
       x = NULL,
       y= &quot;n&quot;,
       fill= &quot;Trophic Guild&quot;)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-16-1.png" /><!-- --></p>
</div>
<div id="adjusting-the-x-and-y-limits" class="section level2">
<h2>Adjusting the x and y limits</h2>
<p>There are many options for adjusting the x and y axes. For details,
look over examples in the <a href="http://www.cookbook-r.com/">R
Cookbook</a>. To adjust limits, we can use the <code>xlim</code> and
<code>ylim</code> commands. When you do this, any data outside the
specified ranges are not plotted.</p>
<pre class="r"><code>homerange %&gt;% 
  ggplot(aes(x = log10.mass, y = log10.hra, color = locomotion)) +
  geom_point() +
  xlim(0, 4) +
  ylim(1, 6)</code></pre>
<pre><code>## Warning: Removed 175 rows containing missing values (`geom_point()`).</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-17-1.png" /><!-- --></p>
</div>
<div id="practice" class="section level2">
<h2>Practice</h2>
<ol style="list-style-type: decimal">
<li><p>Revisit the relationship between mass and homerange using a
scatterplot, but color the points by taxonomic class using a custom
color theme.</p></li>
<li><p>Build bar plots that show the representation by taxonomic class
with carnivores and herbivores. Try using a color theme that matches
your scatterplot to keep everything consistent.</p></li>
</ol>
</div>
<div id="faceting" class="section level2">
<h2>Faceting</h2>
<p><a href="https://ggplot2-book.org/facet.html">Faceting</a> is one of
the amazing features of ggplot. It allows us to make multi-panel plots
for easy comparison.</p>
<p>Letâs use some new data on migratory birds as an example. These data
are from: <a
href="https://doi.org/10.6084/m9.figshare.c.3306933.v1">Wilman, Hamish;
Belmaker, Jonathan; Simpson, Jennifer; de la Rosa, Carolina;
Rivadeneira, Marcelo M.; Jetz, Walter (2016): EltonTraits 1.0:
Species-level foraging attributes of the worldâs birds and mammals.
Wiley. Collection.</a></p>
<p>Here we import the data and clean the names. Because these data have
a header, the skip function helps with a clean import.</p>
<pre class="r"><code>ecosphere &lt;- read_csv(&quot;data/ecs21351-sup-0003-SupplementS1.csv&quot;, skip=2, col_names = T) %&gt;% 
  clean_names() %&gt;% 
  separate(scientific_name, into = c(&quot;genus&quot;, &quot;species&quot;), sep=&quot; &quot;) %&gt;% 
  na.omit() # remove NA&#39;s for now</code></pre>
<pre><code>## Rows: 569 Columns: 21
## ââ Column specification ââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
## Delimiter: &quot;,&quot;
## chr (10): Order, Family, Common Name, Scientific Name, Diet, Life Expectancy...
## dbl (11): log10(mass), Mean Eggs per Clutch, Mean Age at Sexual Maturity, Po...
## 
## â¹ Use `spec()` to retrieve the full column specification for this data.
## â¹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 16 rows [9, 64, 105,
## 245, 304, 310, 328, 331, 341, 362, 400, 401, 489, 494, 519, 538].</code></pre>
<pre class="r"><code>names(ecosphere)</code></pre>
<pre><code>##  [1] &quot;order&quot;                       &quot;family&quot;                     
##  [3] &quot;common_name&quot;                 &quot;genus&quot;                      
##  [5] &quot;species&quot;                     &quot;diet&quot;                       
##  [7] &quot;life_expectancy&quot;             &quot;habitat&quot;                    
##  [9] &quot;urban_affiliate&quot;             &quot;migratory_strategy&quot;         
## [11] &quot;log10_mass&quot;                  &quot;mean_eggs_per_clutch&quot;       
## [13] &quot;mean_age_at_sexual_maturity&quot; &quot;population_size&quot;            
## [15] &quot;winter_range_area&quot;           &quot;range_in_cbc&quot;               
## [17] &quot;strata&quot;                      &quot;circles&quot;                    
## [19] &quot;feeder_bird&quot;                 &quot;median_trend&quot;               
## [21] &quot;lower_95_percent_ci&quot;         &quot;upper_95_percent_ci&quot;</code></pre>
<p>What if we were interested in a comparison of diet and mass, i.e.Â how
does the range of masses compare by different diet types?</p>
<pre class="r"><code>ecosphere %&gt;% 
  ggplot(aes(x=diet, y=log10_mass, fill=diet))+ 
  geom_boxplot(alpha=0.4)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-22-1.png" /><!-- --></p>
<p>This is an interesting plot, but we might use a grouping function to
explore the comparison to include migratory strategy.</p>
<pre class="r"><code>ecosphere %&gt;% 
  ggplot(aes(x=diet, y=log10_mass, fill=migratory_strategy))+ 
  geom_boxplot(alpha=0.4)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-23-1.png" /><!-- --></p>
<p>The problem is that the plot becomes very busy. It is hard to
interpret with each migratory strategy mapped. We could build separate
plots for each migratory strategy, but this also makes it harder to
compare. Instead, we can use faceting to make a multi-panel plot.</p>
<p><code>facet_wrap()</code> makes a ribbon of panels, but you can
control how you want them arranged.</p>
<pre class="r"><code>ecosphere %&gt;% 
  ggplot(aes(x=diet, y=log10_mass, fill=migratory_strategy))+ 
  geom_boxplot(alpha=0.4) + 
  facet_wrap(~migratory_strategy, ncol=4)+
  theme(axis.text.x = element_text(angle = 60, hjust = 1))+
  labs(title = &quot;Mass by Diet and Migratory Strategy&quot;,
       x = NULL,
       y = &quot;Log 10 Mass&quot;,
       fill = &quot;Migratory Strategy&quot;)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-24-1.png" /><!-- --></p>
<p><code>facet_grid()</code> allows control over the faceted variable;
it can be arranged in rows or columns.<br />
rows~columns</p>
<pre class="r"><code>ecosphere %&gt;% 
  ggplot(aes(x=diet, y=log10_mass, fill=migratory_strategy))+ 
  geom_boxplot(alpha=0.4)+ 
  facet_grid(migratory_strategy~.)+
  theme(axis.text.x = element_text(angle = 60, hjust = 1))+
  labs(title = &quot;Mass by Diet and Migratory Strategy&quot;,
       x = NULL,
       y = &quot;Log 10 Mass&quot;,
       fill = &quot;Migratory Strategy&quot;)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-25-1.png" /><!-- --></p>
<pre class="r"><code>ecosphere %&gt;% 
  ggplot(aes(x=diet, y=log10_mass, fill=migratory_strategy))+ 
  geom_boxplot(alpha=0.4)+ 
  facet_grid(.~migratory_strategy)+
  theme(axis.text.x = element_text(angle = 60, hjust = 1))+
  labs(title = &quot;Mass by Diet and Migratory Strategy&quot;,
       x = NULL,
       y = &quot;Log 10 Mass&quot;,
       fill = &quot;Migratory Strategy&quot;)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-26-1.png" /><!-- --></p>
<pre class="r"><code>ecosphere %&gt;% 
  ggplot(aes(x=diet, y=log10_mass, fill=migratory_strategy))+ 
  geom_boxplot(alpha=0.4)+ 
  facet_grid(migratory_strategy~.)+
  theme(axis.text.x = element_text(angle = 60, hjust = 1))+
  labs(title = &quot;Mass by Diet and Migratory Strategy&quot;,
       x = NULL,
       y = &quot;Log 10 Mass&quot;,
       fill = &quot;Migratory Strategy&quot;)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-27-1.png" /><!-- --></p>
<p><code>facet_grid()</code> will also allow the comparison of two
categorical variables, just remember a~b where a is rows and b is
columns.</p>
<pre class="r"><code>ecosphere %&gt;% 
  ggplot(aes(x=log10_mass))+
  geom_density()+
  facet_grid(diet~habitat, scales = &quot;free_y&quot;)</code></pre>
<p><img
src="lab11_2_files/figure-html/unnamed-chunk-28-1.png" /><!-- --></p>
</div>
<div id="practice-1" class="section level2">
<h2>Practice</h2>
<ol style="list-style-type: decimal">
<li><p>Build a faceted plot that shows a distribution of life expectancy
by habitat type.</p></li>
<li><p>Try the same plot as #1 above, but include
life_expectancy~habitat.</p></li>
</ol>
</div>
<div id="thats-it-lets-take-a-break" class="section level2">
<h2>Thatâs it, letâs take a break!</h2>
<p>â&gt;<a
href="https://jmledford3115.github.io/datascibiol/">Home</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
